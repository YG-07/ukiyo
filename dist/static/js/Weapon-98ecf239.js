import{d as le,r as s,k as oe,j as se,U as u,o as a,V as o,W as t,X as n,b as H,e as F,$ as P,P as e,z as M,v as T,Y as r,c as C,N as j,F as I,a4 as ue,a0 as re,a2 as ie,s as D}from"./@vue-5600d395.js";import{P as pe}from"./PicCard-4ded919e.js";import{c as ce,n as me,r as _e,q as de}from"./index-14828061.js";import{U as ye}from"./UrlSelect-ec9f5796.js";import{C as ve}from"./CommonIcon-bfbb031a.js";import{u as he}from"./vue-router-1a713004.js";import{s as fe}from"./star_rail_select-72af43a0.js";import{A as ge}from"./@vicons-c53b9e6c.js";import{e as we,u as ke}from"./naive-ui-ae92ea56.js";import"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-7b9fd68c.js";import"./date-fns-d101b321.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-99fcc978.js";import"./@emotion-e1dc9e92.js";import"./@css-render-5e321065.js";import"./seemly-ab171afc.js";import"./lodash-es-882891f9.js";import"./vooks-d8282700.js";import"./evtd-3bd1ff11.js";import"./vueuc-e5d9b751.js";import"./vdirs-c82cf9c8.js";import"./@juggle-d50e7493.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-94aca45e.js";import"./async-validator-9e2b95c0.js";const Ce=H("h2",null,"\u5149\u9525",-1),xe=F("\u641C\u7D22"),ze=F("\u91CD\u7F6E\u6761\u4EF6"),et=le({__name:"Weapon",setup(Se){const v=s(ce());let L=s(100),R=s(169);v.value?(L.value=100,R.value=169):(L.value=45,R.value=76);const m=s(!1),W=we(),X=ke();he();let w=s({pageNum:1,pageSize:100}),d=s(!0),x=s(""),z=s(-2),S=s(-2),U=s(0),k=s([]),h=s(`
    ${v.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const Y=l=>{z.value=l,f(1)},G=l=>{S.value=l,f(1)},J=l=>{x.value=l},O=l=>{f(1)},Q=()=>{x.value="",z.value=S.value=-2,f(1)},Z=l=>{w.value.pageSize=l,f(1)},ee=l=>[D("div",{className:"render-star-rail-weapon-label"},{default:()=>[l.value>-1?D(ve,{url:fe[l.value].icon_url,size:30},{default:()=>D("")}):void 0,D("span",{},{default:()=>l.label})]})],B=s({}),K=async()=>{W.start(),m.value=!0;let l={name:x.value,weapon:z.value,star:S.value,page:w.value},{code:g,data:i,msg:E}=await _e(l);if(g!=200){X.error(E),setTimeout(()=>{W.finish()},500),m.value=!1;return}U.value=i.total;const{star_rail_base:b,star_rail_wiki_base:p,star_rail_mhy_url:N,star_rail_weapon:$}=await de(),A=`${b}${N}`,V=`${p}${$}`;k.value=i==null?void 0:i.records.map(_=>(_.mhy_URL=A.replace("{id}",_.mhy_url),_.wiki_URL=V.replace("{id}",_.wiki_url),_.imgSrc=_.icon_url,_)),setTimeout(()=>{W.finish()},500),m.value=!1},f=async l=>{w.value.pageNum=l,k.value=[],U.value=0,K()};return oe(async()=>{B.value=await me()}),se(()=>{K()}),(l,g)=>{const i=u("n-skeleton"),E=u("n-gradient-text"),b=u("n-layout-header"),p=u("n-space"),N=u("n-select"),$=u("n-input"),A=u("n-button"),V=u("n-divider"),_=u("n-icon"),te=u("n-empty"),ae=u("n-layout-content"),ne=u("n-pagination"),q=u("n-layout");return a(),o(q,null,{default:t(()=>[n(b,{class:"header-top"},{default:t(()=>[H("div",null,[Ce,m.value?(a(),o(i,{key:0,width:150,sharp:!1,size:"medium"})):(a(),o(E,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[F(" \u5171"+P(e(U))+"\u4E2A\uFF0C\u5DF2\u5C55\u793A"+P(e(k).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))]),m.value?(a(),o(i,{key:0,width:300,sharp:!1,size:"medium"})):(a(),o(ye,{key:1}))]),_:1}),n(q,null,{default:t(()=>[n(b,null,{default:t(()=>[m.value?M((a(),o(p,{key:0,style:r(e(h))},{default:t(()=>[(a(!0),C(I,null,j(new Array(6),(c,y)=>(a(),o(i,{key:y,width:260,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[T,e(d)]]):M((a(),o(p,{key:1,class:"space-main",style:r(e(h))},{default:t(()=>{var c,y;return[n(N,{value:e(S),"onUpdate:value":G,options:(c=B.value)==null?void 0:c.star,style:r(v.value?"width: 200px":"")},null,8,["value","options","style"]),n(N,{"render-label":ee,value:e(z),"onUpdate:value":Y,options:(y=B.value)==null?void 0:y.weapon,style:r(v.value?"width: 200px":"")},null,8,["value","options","style"]),n($,{value:e(x),onKeyup:ue(O,["enter"]),"onUpdate:value":J,type:"text",placeholder:"\u641C\u7D22\u6B66\u5668\u540D",style:r(v.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),n(p,{style:r(v.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[n(A,{type:"success",style:{width:"84px"},onClick:g[0]||(g[0]=Ue=>f(1))},{default:t(()=>[xe]),_:1}),n(A,{type:"warning",onClick:Q},{default:t(()=>[ze]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[T,e(d)]]),v.value?ie("",!0):(a(),o(V,{key:2,onClick:g[1]||(g[1]=c=>re(d)?d.value=!e(d):d=!e(d))},{default:t(()=>[F(P(e(d)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),n(ae,{"has-sider":""},{default:t(()=>[m.value?(a(),o(p,{key:0,style:r(e(h))},{default:t(()=>[(a(!0),C(I,null,j(new Array(20),(c,y)=>(a(),C("div",{key:y},[n(i,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!m.value&&e(k).length>0?(a(),o(p,{key:1,style:r(e(h))},{default:t(()=>[(a(!0),C(I,null,j(e(k),(c,y)=>(a(),C("div",{key:y},[n(pe,{width:e(L),height:e(R),src:c.imgSrc,item:c,mhy_url:c.mhy_URL,wiki_url:c.wiki_URL,objectFit:"contain"},null,8,["width","height","src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(a(),o(p,{key:2,style:r([{width:"100%"},e(h)])},{default:t(()=>[n(te,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[n(_,null,{default:t(()=>[n(e(ge))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),n(q,{"content-style":"overflow-x: scroll;"},{default:t(()=>[m.value?(a(),o(p,{key:0,style:r(e(h))},{default:t(()=>[n(i,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(a(),o(p,{key:1,style:r(e(h))},{default:t(()=>[n(ne,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(U),"on-update:page":f,"show-size-picker":"","page-sizes":[30,50,100,150,200,300],"on-update:page-size":Z},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{et as default};
