import{d as ee,r as l,k as te,j as ae,U as o,o as a,V as n,W as t,X as u,b,e as D,$ as I,P as e,z as T,v as j,Y as p,c as k,N as P,F as K,a4 as ue,a0 as ne,a2 as le}from"./@vue-5600d395.js";import{P as oe}from"./PicCard-4ded919e.js";import{c as se,a as ie,h as re,q as ce}from"./index-14828061.js";import{U as pe}from"./UrlSelect-ec9f5796.js";import{A as me}from"./@vicons-c53b9e6c.js";import{e as de,u as _e}from"./naive-ui-ae92ea56.js";import"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-7b9fd68c.js";import"./date-fns-d101b321.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-99fcc978.js";import"./@emotion-e1dc9e92.js";import"./@css-render-5e321065.js";import"./seemly-ab171afc.js";import"./lodash-es-882891f9.js";import"./vooks-d8282700.js";import"./evtd-3bd1ff11.js";import"./vueuc-e5d9b751.js";import"./vdirs-c82cf9c8.js";import"./@juggle-d50e7493.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-94aca45e.js";import"./async-validator-9e2b95c0.js";const ye=b("h2",null,"\u300C\u4E03\u5723\u53EC\u5524\u300D\u5361\u724C\uFF08\u5206\u7C7B\u4EC5\u4F9B\u53C2\u8003\uFF0C\u8BE6\u60C5\u94FE\u63A5\u4EC5\u4E3A\u62C6\u5305\u7F51\uFF09",-1),he=b("p",null,[b("a",{href:"https://bbs.mihoyo.com/ys/obc/channel/map/231/234"},"\u7C73\u6E38\u793E\u4E03\u5723\u53EC\u5524wiki")],-1),ve=D("\u641C\u7D22"),fe=D("\u91CD\u7F6E\u6761\u4EF6"),je=ee({__name:"Card",setup(ge){const h=l(se());let N=l(100),B=l(169);h.value?(N.value=100,B.value=169):(N.value=45,B.value=76);const m=l(!1),$=de(),G=_e();let d=l(!0),E=l(""),x=l(-2),w=l({pageNum:1,pageSize:100}),F=l(0),C=l([]),y=l(`
    ${h.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const W=s=>{x.value=s,v(1)},X=s=>{E.value=s},Y=s=>{v(1)},H=()=>{E.value="",x.value=-2,v(1)},J=s=>{w.value.pageSize=s,v(1)};l({});const M=l({}),R=async()=>{$.start(),m.value=!0;let s={name:E.value,card:x.value,page:w.value},{code:f,data:i,msg:U}=await re(s);if(f!=200){G.error(U),setTimeout(()=>{$.finish()},500),m.value=!1;return}F.value=i.total;const{mhy_base:z,mhy_url:r,wiki_base:A,wiki_book_item:L}=await ce(),S=`${z}${r}`,V=`${A}${L}`;C.value=i==null?void 0:i.records.map(_=>(_.mhy_url=S.replace("{id}","-"),_.wiki_url=V.replace("{id}",_.url),_.imgSrc=`${A}${_.icon_url}`,_)),setTimeout(()=>{$.finish()},500),m.value=!1},v=async s=>{w.value.pageNum=s,C.value=[],F.value=0,R()};return te(async()=>{M.value=await ie()}),ae(()=>{R()}),(s,f)=>{const i=o("n-skeleton"),U=o("n-gradient-text"),z=o("n-layout-header"),r=o("n-space"),A=o("n-select"),L=o("n-input"),S=o("n-button"),V=o("n-divider"),_=o("n-icon"),O=o("n-empty"),Q=o("n-layout-content"),Z=o("n-pagination"),q=o("n-layout");return a(),n(q,null,{default:t(()=>[u(z,{class:"header-top"},{default:t(()=>[b("div",null,[ye,he,m.value?(a(),n(i,{key:0,width:150,sharp:!1,size:"medium"})):(a(),n(U,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[D(" \u5171"+I(e(F))+"\u4E2A\uFF0C\u5DF2\u5C55\u793A"+I(e(C).length)+"\u4E2A ",1)]),_:1},8,["gradient"]))]),m.value?(a(),n(i,{key:0,width:300,sharp:!1,size:"medium"})):(a(),n(pe,{key:1}))]),_:1}),u(q,null,{default:t(()=>[u(z,null,{default:t(()=>[m.value?T((a(),n(r,{key:0,style:p(e(y))},{default:t(()=>[(a(!0),k(K,null,P(new Array(8),(c,g)=>(a(),n(i,{key:g,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[j,e(d)]]):T((a(),n(r,{key:1,class:"space-main",style:p(e(y))},{default:t(()=>{var c;return[u(A,{value:e(x),"onUpdate:value":W,options:(c=M.value)==null?void 0:c.card,style:p(h.value?"width: 200px":"")},null,8,["value","options","style"]),u(L,{value:e(E),onKeyup:ue(Y,["enter"]),"onUpdate:value":X,type:"text",placeholder:"\u641C\u7D22\u5361\u724C\u7269\u54C1\u540D",style:p(h.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),u(r,{style:p(h.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[u(S,{type:"success",style:{width:"84px"},onClick:f[0]||(f[0]=g=>v(1))},{default:t(()=>[ve]),_:1}),u(S,{type:"warning",onClick:H},{default:t(()=>[fe]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[j,e(d)]]),h.value?le("",!0):(a(),n(V,{key:2,onClick:f[1]||(f[1]=c=>ne(d)?d.value=!e(d):d=!e(d))},{default:t(()=>[D(I(e(d)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),u(Q,{"has-sider":""},{default:t(()=>[m.value?(a(),n(r,{key:0,style:p(e(y))},{default:t(()=>[(a(!0),k(K,null,P(new Array(20),(c,g)=>(a(),k("div",{key:g},[u(i,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!m.value&&e(C).length>0?(a(),n(r,{key:1,style:p(e(y))},{default:t(()=>[(a(!0),k(K,null,P(e(C),(c,g)=>(a(),k("div",{key:g},[u(oe,{width:e(N),height:e(B),src:c.imgSrc,item:c,mhy_url:c.mhy_url,wiki_url:c.wiki_url},null,8,["width","height","src","item","mhy_url","wiki_url"])]))),128))]),_:1},8,["style"])):(a(),n(r,{key:2,style:p([{width:"100%"},e(y)])},{default:t(()=>[u(O,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[u(_,null,{default:t(()=>[u(e(me))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),u(q,{"content-style":"overflow-x: scroll;"},{default:t(()=>[m.value?(a(),n(r,{key:0,style:p(e(y))},{default:t(()=>[u(i,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(a(),n(r,{key:1,style:p(e(y))},{default:t(()=>[u(Z,{page:e(w).pageNum,"page-size":e(w).pageSize,"item-count":e(F),"on-update:page":v,"show-size-picker":"","page-sizes":[10,50,70,100],"on-update:page-size":J},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{je as default};
