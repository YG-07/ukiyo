import{d as ve,r as i,n as G,j as fe,U as u,o as a,V as s,W as t,X as l,b as x,e as C,$ as k,P as e,z as H,v as J,Y as o,c as p,N as A,F as S,a4 as ge,a0 as we,a2 as Q,Z as ke,_ as xe}from"./@vue-5600d395.js";import{c as Ce,x as be,y as De}from"./index-14828061.js";import{u as Be,b as Ae}from"./vue-router-1a713004.js";import{A as ee}from"./@vicons-c53b9e6c.js";import{e as Se,u as Fe}from"./naive-ui-ae92ea56.js";import{_ as Ee}from"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-7b9fd68c.js";import"./date-fns-d101b321.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-99fcc978.js";import"./@emotion-e1dc9e92.js";import"./@css-render-5e321065.js";import"./seemly-ab171afc.js";import"./lodash-es-882891f9.js";import"./vooks-d8282700.js";import"./evtd-3bd1ff11.js";import"./vueuc-e5d9b751.js";import"./vdirs-c82cf9c8.js";import"./@juggle-d50e7493.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-94aca45e.js";import"./async-validator-9e2b95c0.js";const Ne=F=>(ke("data-v-adbea085"),F=F(),xe(),F),ze=Ne(()=>x("h2",null,"\u78A7\u84DD\u6863\u6848\u6F2B\u753B",-1)),$e=C("\u641C\u7D22"),Le=C("\u91CD\u7F6E\u6761\u4EF6"),je={key:0,style:{width:"100%"}},Ie={class:"card-info"},Pe={class:"title"},Re={key:1,style:{width:"100%"}},Ve={key:0,style:{width:"100%"}},qe={style:{width:"100%","text-align":"center"}},Te=C("\u8FD4\u56DE"),Ue=C("\u8FD4\u56DE"),Ke=C("\u8FD4\u56DE"),Me=ve({__name:"picacg",setup(F){var M;const te="https://via.placeholder.com/180x280/ccc/fff.jpg&text=NO%20COVER",d=i(Ce()),r=i(!1),b=Se(),q=Fe(),T=Be(),E=Ae();let m=i(`
    ${d.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `),ae=i(`
    ${d.value?"width:180px;":"width:38vw;"}
    ${d.value?"height:280px;":"height:60vw;"}
  `);const le=i("width:100%; height:100%;"),oe=i(`
    width:100%;
    object-fit: cover;
    max-height: calc(${d.value?"280px":"60vw"} - 5em);
  `),L=i(`
    ${d.value?"width:50%;":"width:100%;"}
    margin-bottom: 1em;
  `);let N=i(!0),f=i(null),D=i([]),j=i([]),z=i({}),h=i(!0),$=i(""),I=i("");(M=T.query)!=null&&M.id&&(f.value=T.query.id,N.value=!1);const ne=n=>{$.value=n},U=n=>{I.value=$.value},se=()=>{$.value="",I.value=""},ue=async()=>{b.start(),r.value=!0;let{code:n,data:y,msg:c}=await be();if(n!=200){q.error(c),setTimeout(()=>{b.finish()},500),r.value=!1;return}D.value=y.map(g=>(z.value[g.id]=g,g)),setTimeout(()=>{b.finish()},500),r.value=!1},ie=async()=>{b.start(),r.value=!0;let{code:n,data:y,msg:c}=await De();if(n!=200){q.error(c),setTimeout(()=>{b.finish()},500),r.value=!1;return}j.value=y,setTimeout(()=>{b.finish()},500),r.value=!1},re=n=>{N.value=!1,f.value=n.id,E.push({...E.currentRoute.value,query:{id:n.id}})},P=()=>{N.value=!0,E.push({...E.currentRoute.value,query:{}})},ce=()=>{D.value=D.value.map(n=>{let y=te,c=j.value.find(g=>g.book==n.id);return c&&(y=c.img_url),{...n,url:y}})},R=G(()=>D.value.filter(n=>n.book_name.includes(I.value))),K=G(()=>f.value?j.value.filter(n=>n.book==f.value):[]);return fe(async()=>{await ie(),await ue(),await ce()}),(n,y)=>{const c=u("n-skeleton"),g=u("n-gradient-text"),de=u("BlueUrlSelect"),O=u("n-layout-header"),w=u("n-space"),_e=u("n-input"),B=u("n-button"),pe=u("n-divider"),W=u("n-image"),me=u("n-card"),X=u("n-icon"),Y=u("n-empty"),V=u("n-flex"),ye=u("n-image-group"),he=u("n-layout-content"),Z=u("n-layout");return a(),s(Z,null,{default:t(()=>[l(O,{class:"header-top"},{default:t(()=>[x("div",null,[ze,r.value?(a(),s(c,{key:0,width:150,sharp:!1,size:"medium"})):(a(),s(g,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[C(" \u5171"+k(e(D).length)+"\u672C\uFF0C\u5DF2\u5C55\u793A"+k(e(R).length)+"\u672C ",1)]),_:1},8,["gradient"]))]),r.value?(a(),s(c,{key:0,width:300,sharp:!1,size:"medium"})):(a(),s(de,{key:1}))]),_:1}),l(Z,null,{default:t(()=>[l(O,null,{default:t(()=>[r.value?H((a(),s(w,{key:0,style:o(e(m))},{default:t(()=>[(a(!0),p(S,null,A(new Array(4),(_,v)=>(a(),s(c,{key:v,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[J,e(h)]]):H((a(),s(w,{key:1,class:"space-main",style:o(e(m))},{default:t(()=>[l(_e,{value:e($),onKeyup:ge(U,["enter"]),"onUpdate:value":ne,type:"text",placeholder:"\u641C\u7D22\u6F2B\u753B\u540D\u79F0",style:o(d.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),l(w,{style:o(d.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[l(B,{type:"success",style:{width:"84px"},onClick:U},{default:t(()=>[$e]),_:1}),l(B,{type:"warning",onClick:se},{default:t(()=>[Le]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])),[[J,e(h)]]),d.value?Q("",!0):(a(),s(pe,{key:2,onClick:y[0]||(y[0]=_=>we(h)?h.value=!e(h):h=!e(h))},{default:t(()=>[C(k(e(h)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),l(he,{"has-sider":""},{default:t(()=>[e(N)?(a(),p("div",je,[r.value?(a(),s(w,{key:0,style:o(e(m))},{default:t(()=>[(a(!0),p(S,null,A(new Array(20),(_,v)=>(a(),p("div",{key:v},[l(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(R).length>0?(a(),s(w,{key:1,style:o([e(m),{"justify-content":"left"}])},{default:t(()=>[(a(!0),p(S,null,A(e(R),(_,v)=>(a(),s(me,{hoverable:"",style:o(e(ae)),"content-style":"padding: 0;",onClick:Oe=>re(_)},{default:t(()=>[x("div",Ie,[x("div",{class:"img-area",style:o(`${d.value?"height: calc(-5em + 25vw);":"height: calc(-5em + 60vw);"}`)},[l(W,{src:_.url,"object-fit":"cover",lazy:"","img-props":{style:oe.value},style:o(le.value)},null,8,["src","img-props","style"])],4),x("div",Pe," ("+k(_.total)+"P)"+k(_.book_name),1)])]),_:2},1032,["style","onClick"]))),256))]),_:1},8,["style"])):(a(),s(w,{key:2,style:o([{width:"100%"},e(m)])},{default:t(()=>[l(Y,{description:"\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[l(X,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))])):(a(),p("div",Re,[r.value?(a(),s(w,{key:0,style:o(e(m))},{default:t(()=>[(a(!0),p(S,null,A(new Array(20),(_,v)=>(a(),p("div",{key:v},[l(c,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(K).length>0?(a(),s(V,{key:1,vertical:"",style:o([{width:"98%"},e(m)])},{default:t(()=>[e(z)[e(f)]?(a(),p("div",Ve,[x("h3",qe,k(e(z)[e(f)].book_name)+" ("+k(e(z)[e(f)].total)+"P)",1)])):Q("",!0),x("div",{style:o([{width:"100%"},e(m)])},[l(B,{style:o(L.value),type:"info",ghost:"",onClick:P},{default:t(()=>[Te]),_:1},8,["style"]),l(ye,null,{default:t(()=>[l(V,{vertical:"",style:{width:"100%",display:"flex","flex-wrap":"wrap"}},{default:t(()=>[(a(!0),p(S,null,A(e(K),(_,v)=>(a(),s(W,{"object-fit":"contain",key:v,src:_.img_url,lazy:"",style:o([{"margin-bottom":"3px",display:"flex","justify-content":"center"},`${d.value?"height:30vw;":"width:100%; height:100vw;"}`])},null,8,["src","style"]))),128))]),_:1})]),_:1}),l(B,{style:o(L.value),type:"info",ghost:"",onClick:P},{default:t(()=>[Ue]),_:1},8,["style"])],4)]),_:1},8,["style"])):(a(),s(V,{key:2,vertical:"",style:o([{width:"98%"},e(m)])},{default:t(()=>[l(B,{style:o(L.value),type:"info",ghost:"",onClick:P},{default:t(()=>[Ke]),_:1},8,["style"]),l(Y,{description:"\u6570\u636E\u4E3A\u7A7A",style:{width:"100%","margin-top":"2em"}},{icon:t(()=>[l(X,null,{default:t(()=>[l(e(ee))]),_:1})]),_:1})]),_:1},8,["style"]))]))]),_:1})]),_:1})]),_:1})}}});const yt=Ee(Me,[["__scopeId","data-v-adbea085"]]);export{yt as default};
