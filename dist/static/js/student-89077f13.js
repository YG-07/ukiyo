import{d as xe,r as u,k as Se,j as be,U as p,o as n,V as i,W as l,X as a,b as ae,e as E,$ as T,P as t,z as ee,v as te,Y as o,c as S,N as K,F as j,a4 as De,a0 as Fe,a2 as Ae,s as B}from"./@vue-5600d395.js";import{B as ze,a as Ue}from"./BlueUrlSelect-9068e098.js";import{c as Be,u as Ee,v as Le,q as Ne}from"./index-14828061.js";import{C as Re}from"./CommonIcon-bfbb031a.js";import{A as $e}from"./@vicons-c53b9e6c.js";import{e as Ve,u as qe}from"./naive-ui-ae92ea56.js";import"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-7b9fd68c.js";import"./date-fns-d101b321.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-99fcc978.js";import"./@emotion-e1dc9e92.js";import"./@css-render-5e321065.js";import"./seemly-ab171afc.js";import"./lodash-es-882891f9.js";import"./vooks-d8282700.js";import"./evtd-3bd1ff11.js";import"./vueuc-e5d9b751.js";import"./vdirs-c82cf9c8.js";import"./@juggle-d50e7493.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-94aca45e.js";import"./async-validator-9e2b95c0.js";const Ie=[{id:0,name:"\u963F\u62DC\u591A\u65AF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/169570.png"},{id:1,name:"\u683C\u9ED1\u5A1C",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/824731.png"},{id:2,name:"\u4E09\u4E00",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/869881.png"},{id:3,name:"\u5343\u5E74\u79D1\u5B66",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/873884.png"},{id:4,name:"\u767E\u9B3C\u591C\u884C",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/342619.png"},{id:5,name:"\u5C71\u6D77\u7ECF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/394261.png"},{id:6,name:"\u963F\u91CC\u4E4C\u65AF",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_413/h_374/829/43637/2023/7/4/302051.png"},{id:7,name:"\u8D64\u51AC",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/747305.png"},{id:8,name:"SRT",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/529744.png"},{id:9,name:"\u74E6\u5C14\u57FA\u91CC",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/401437.png"},{id:10,name:"\u5176\u4ED6",icon_url:"https://cdnimg.gamekee.com/wiki2.0/images/w_688/h_624/829/43637/2023/7/4/120452.png"}],Me=ae("h2",null,"\u5B66\u751F",-1),Pe=E("\u641C\u7D22"),Te=E("\u91CD\u7F6E\u6761\u4EF6"),vt=xe({__name:"student",setup(Ke){const r=u(Be()),h=u(!1),L=Ve(),le=qe();let y=u(!0),b=u(""),D=u(-2),F=u(-2),A=u(-2),N=u(-2),R=u(-2),$=u(-2),V=u(-2),q=u(-2),I=u(-2),C=u({pageNum:1,pageSize:100}),z=u(0),x=u([]),f=u(`
    ${r.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const ne=e=>{D.value=e,s(1)},ue=e=>{F.value=e,s(1)},oe=e=>{N.value=e,s(1)},se=e=>{R.value=e,s(1)},ie=e=>{$.value=e,s(1)},re=e=>{V.value=e,s(1)},pe=e=>{q.value=e,s(1)},ce=e=>{I.value=e,s(1)},me=e=>{A.value=e,s(1)},de=e=>{b.value=e},_e=e=>{s(1)},ve=()=>{b.value="",D.value=F.value=A.value=-2,s(1)},ge=e=>{C.value.pageSize=e,s(1)},he=e=>[B("div",{style:{display:"flex",alignItems:"center"}},{default:()=>[e.value>-1?B(Re,{url:Ie[e.value].icon_url,size:30},{default:()=>B("")}):void 0,B("span",{},{default:()=>e.label})]})],d=u({}),W=async()=>{L.start(),h.value=!0;let e={name:b.value,position:D.value,weapon:F.value,star:A.value,school:N.value,club:R.value,attack:$.value,defense:V.value,map_get:q.value,banner:I.value,page:C.value},{code:k,data:_,msg:M}=await Le(e);if(k!=200){le.error(M),setTimeout(()=>{L.finish()},500),h.value=!1;return}z.value=_.total;const{blue_archive_base:U,blue_archive_detail:v}=await Ne(),c=`${U}${v}`;x.value=_==null?void 0:_.records.map(m=>(m.wiki_URL=c.replace("{id}",m.url),m.imgSrc=m.icon_url,m.imgList=[],m.img_urls&&(m.imgList=m.img_urls.split(",")),m)),setTimeout(()=>{L.finish()},500),h.value=!1},s=async e=>{C.value.pageNum=e,x.value=[],z.value=0,W()};return Se(async()=>{d.value=await Ee()}),be(()=>{W()}),(e,k)=>{const _=p("n-skeleton"),M=p("n-gradient-text"),U=p("n-layout-header"),v=p("n-space"),c=p("n-select"),m=p("n-input"),G=p("n-button"),ye=p("n-divider"),we=p("n-icon"),fe=p("n-empty"),ke=p("n-layout-content"),Ce=p("n-pagination"),P=p("n-layout");return n(),i(P,null,{default:l(()=>[a(U,{class:"header-top"},{default:l(()=>[ae("div",null,[Me,h.value?(n(),i(_,{key:0,width:150,sharp:!1,size:"medium"})):(n(),i(M,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:l(()=>[E(" \u5171"+T(t(z))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+T(t(x).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),h.value?(n(),i(_,{key:0,width:300,sharp:!1,size:"medium"})):(n(),i(ze,{key:1}))]),_:1}),a(P,null,{default:l(()=>[a(U,null,{default:l(()=>[h.value?ee((n(),i(v,{key:0,style:o(t(f))},{default:l(()=>[(n(!0),S(j,null,K(new Array(8),(g,w)=>(n(),i(_,{key:w,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[te,t(y)]]):ee((n(),i(v,{key:1,class:"space-main",style:o(t(f))},{default:l(()=>{var g,w,X,Y,H,J,O,Q,Z;return[a(c,{value:t(A),"onUpdate:value":me,options:(g=d.value)==null?void 0:g.star,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(D),"onUpdate:value":ne,options:(w=d.value)==null?void 0:w.position,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(F),"onUpdate:value":ue,options:(X=d.value)==null?void 0:X.weapon,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{"render-label":he,value:t(N),"onUpdate:value":oe,options:(Y=d.value)==null?void 0:Y.school,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(R),"onUpdate:value":se,options:(H=d.value)==null?void 0:H.club,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t($),"onUpdate:value":ie,options:(J=d.value)==null?void 0:J.attack,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(V),"onUpdate:value":re,options:(O=d.value)==null?void 0:O.defense,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(q),"onUpdate:value":pe,options:(Q=d.value)==null?void 0:Q.map_get,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(c,{value:t(I),"onUpdate:value":ce,options:(Z=d.value)==null?void 0:Z.banner,style:o(r.value?"width: 200px":"")},null,8,["value","options","style"]),a(m,{value:t(b),onKeyup:De(_e,["enter"]),"onUpdate:value":de,type:"text",placeholder:"\u641C\u7D22\u5B66\u751F\u540D",style:o(r.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),a(v,{style:o(r.value?"flex:1;":"min-width: 200px;")},{default:l(()=>[a(G,{type:"success",style:{width:"84px"},onClick:k[0]||(k[0]=je=>s(1))},{default:l(()=>[Pe]),_:1}),a(G,{type:"warning",onClick:ve},{default:l(()=>[Te]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[te,t(y)]]),r.value?Ae("",!0):(n(),i(ye,{key:2,onClick:k[1]||(k[1]=g=>Fe(y)?y.value=!t(y):y=!t(y))},{default:l(()=>[E(T(t(y)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),a(ke,{"has-sider":""},{default:l(()=>[h.value?(n(),i(v,{key:0,style:o(t(f))},{default:l(()=>[(n(!0),S(j,null,K(new Array(20),(g,w)=>(n(),S("div",{key:w},[a(_,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!h.value&&t(x).length>0?(n(),i(v,{key:1,style:o(t(f))},{default:l(()=>[(n(!0),S(j,null,K(t(x),(g,w)=>(n(),S("div",{key:w},[a(Ue,{src:g.imgSrc,item:g,url:g.wiki_URL,"img-list":g.imgList},null,8,["src","item","url","img-list"])]))),128))]),_:1},8,["style"])):(n(),i(v,{key:2,style:o([{width:"100%"},t(f)])},{default:l(()=>[a(fe,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:l(()=>[a(we,null,{default:l(()=>[a(t($e))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),a(P,{"content-style":"overflow-x: scroll;"},{default:l(()=>[h.value?(n(),i(v,{key:0,style:o(t(f))},{default:l(()=>[a(_,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(n(),i(v,{key:1,style:o(t(f))},{default:l(()=>[a(Ce,{page:t(C).pageNum,"page-size":t(C).pageSize,"item-count":t(z),"on-update:page":s,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":ge},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{vt as default};
