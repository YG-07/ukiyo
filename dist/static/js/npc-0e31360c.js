import{d as H,r as p,k as J,j as O,U as u,o as a,V as l,W as t,X as n,b as R,e as F,$ as L,P as e,z as E,v as $,Y as m,c as w,N as b,F as P,a4 as Q,a0 as Z,a2 as ee}from"./@vue-5600d395.js";import{B as te,a as ae}from"./BlueUrlSelect-9068e098.js";import{c as ne,u as le,w as se,q as ue}from"./index-14828061.js";import{A as oe}from"./@vicons-c53b9e6c.js";import{e as ie,u as re}from"./naive-ui-ae92ea56.js";import"./plugin-vueexport-helper-d7c00f7c.js";import"./lodash-7b9fd68c.js";import"./date-fns-d101b321.js";import"./moment-b35f754a.js";import"./mitt-dab1f1cb.js";import"./css-render-99fcc978.js";import"./@emotion-e1dc9e92.js";import"./@css-render-5e321065.js";import"./seemly-ab171afc.js";import"./lodash-es-882891f9.js";import"./vooks-d8282700.js";import"./evtd-3bd1ff11.js";import"./vueuc-e5d9b751.js";import"./vdirs-c82cf9c8.js";import"./@juggle-d50e7493.js";import"./treemate-97ea80b9.js";import"./date-fns-tz-94aca45e.js";import"./async-validator-9e2b95c0.js";const ce=R("h2",null,"NPC\u548C\u536B\u661F",-1),pe=F("\u641C\u7D22"),me=F("\u91CD\u7F6E\u6761\u4EF6"),Re=H({__name:"npc",setup(_e){const C=p(ne()),r=p(!1),B=ie(),V=re();let _=p(!0),x=p(""),g=p({pageNum:1,pageSize:100}),z=p(0),h=p([]),y=p(`
    ${C.value?"margin: 20px;":"margin:2px;"}
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  `);const q=c=>{x.value=c},K=c=>{v(1)},M=()=>{x.value="",v(1)},j=c=>{g.value.pageSize=c,v(1)},I=p({}),U=async()=>{B.start(),r.value=!0;let c={name:x.value,page:g.value},{code:f,data:o,msg:D}=await se(c);if(f!=200){V.error(D),B.finish(),r.value=!1;return}z.value=o.total;const{blue_archive_base:N,blue_archive_detail:i}=await ue(),S=`${N}${i}`;h.value=o==null?void 0:o.records.map(s=>(s.wiki_URL=S.replace("{id}",s.url),s.imgSrc=s.icon_url,s.imgList=[],s.img_urls&&(s.imgList=s.img_urls.split(",")),s)),B.finish(),r.value=!1},v=async c=>{g.value.pageNum=c,h.value=[],z.value=0,U()};return J(async()=>{I.value=await le()}),O(()=>{U()}),(c,f)=>{const o=u("n-skeleton"),D=u("n-gradient-text"),N=u("n-layout-header"),i=u("n-space"),S=u("n-input"),s=u("n-button"),T=u("n-divider"),W=u("n-icon"),X=u("n-empty"),Y=u("n-layout-content"),G=u("n-pagination"),A=u("n-layout");return a(),l(A,null,{default:t(()=>[n(N,{class:"header-top"},{default:t(()=>[R("div",null,[ce,r.value?(a(),l(o,{key:0,width:150,sharp:!1,size:"medium"})):(a(),l(D,{key:1,gradient:{from:"rgb(85, 85, 85)",to:"rgb(170, 170, 170)"}},{default:t(()=>[F(" \u5171"+L(e(z))+"\u4F4D\uFF0C\u5DF2\u5C55\u793A"+L(e(h).length)+"\u4F4D ",1)]),_:1},8,["gradient"]))]),r.value?(a(),l(o,{key:0,width:300,sharp:!1,size:"medium"})):(a(),l(te,{key:1}))]),_:1}),n(A,null,{default:t(()=>[n(N,null,{default:t(()=>[r.value?E((a(),l(i,{key:0,style:m(e(y))},{default:t(()=>[(a(!0),w(P,null,b(new Array(4),(d,k)=>(a(),l(o,{key:k,width:200,sharp:!1,size:"medium"}))),128))]),_:1},8,["style"])),[[$,e(_)]]):E((a(),l(i,{key:1,class:"space-main",style:m(e(y))},{default:t(()=>[n(S,{value:e(x),onKeyup:Q(K,["enter"]),"onUpdate:value":q,type:"text",placeholder:"\u641C\u7D22NPC\u6216\u536B\u661F\u7684\u540D\u79F0",style:m(C.value?"width: 200px":"min-width: 200px;")},null,8,["value","onKeyup","style"]),n(i,{style:m(C.value?"flex:1;":"min-width: 200px;")},{default:t(()=>[n(s,{type:"success",style:{width:"84px"},onClick:f[0]||(f[0]=d=>v(1))},{default:t(()=>[pe]),_:1}),n(s,{type:"warning",onClick:M},{default:t(()=>[me]),_:1})]),_:1},8,["style"])]),_:1},8,["style"])),[[$,e(_)]]),C.value?ee("",!0):(a(),l(T,{key:2,onClick:f[1]||(f[1]=d=>Z(_)?_.value=!e(_):_=!e(_))},{default:t(()=>[F(L(e(_)?"\u6536\u8D77\u641C\u7D22":"\u5C55\u5F00\u641C\u7D22"),1)]),_:1}))]),_:1}),n(Y,{"has-sider":""},{default:t(()=>[r.value?(a(),l(i,{key:0,style:m(e(y))},{default:t(()=>[(a(!0),w(P,null,b(new Array(20),(d,k)=>(a(),w("div",{key:k},[n(o,{width:100,height:123,sharp:!1,size:"medium"})]))),128))]),_:1},8,["style"])):!r.value&&e(h).length>0?(a(),l(i,{key:1,style:m(e(y))},{default:t(()=>[(a(!0),w(P,null,b(e(h),(d,k)=>(a(),w("div",{key:k},[n(ae,{src:d.imgSrc,item:d,url:d.wiki_URL,"img-list":d.imgList},null,8,["src","item","url","img-list"])]))),128))]),_:1},8,["style"])):(a(),l(i,{key:2,style:m([{width:"100%"},e(y)])},{default:t(()=>[n(X,{description:"\u6240\u9009\u6761\u4EF6\u7684\u6570\u636E\u4E3A\u7A7A"},{icon:t(()=>[n(W,null,{default:t(()=>[n(e(oe))]),_:1})]),_:1})]),_:1},8,["style"]))]),_:1}),n(A,{"content-style":"overflow-x: scroll;"},{default:t(()=>[r.value?(a(),l(i,{key:0,style:m(e(y))},{default:t(()=>[n(o,{width:300,sharp:!1,size:"medium"})]),_:1},8,["style"])):(a(),l(i,{key:1,style:m(e(y))},{default:t(()=>[n(G,{page:e(g).pageNum,"page-size":e(g).pageSize,"item-count":e(z),"on-update:page":v,"show-size-picker":"","page-sizes":[10,50,100,150],"on-update:page-size":j},null,8,["page","page-size","item-count"])]),_:1},8,["style"]))]),_:1})]),_:1})]),_:1})}}});export{Re as default};
